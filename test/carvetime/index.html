<!DOCTYPE html> 

<html>

<head>

<meta charset="utf-8"> 

<meta name="description" content="时光雕刻者">

<meta name="keywords" content="时光雕刻者">

<!--[if lte IE 6]><script src="js/ie6/warning.js"></script><script>window.onload=function(){e("js/ie6/")}</script><![endif]-->

<script type="text/javascript" src="js/jquery.min.js"></script>

<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="js/face_recognition.js"></script>
<script type="text/javascript" src="js/face_adjust.js"></script>

<link href="css/style.css" rel="stylesheet" type="text/css">


<!--toTop-->


<!--Top Bar-->

<title>时光雕刻者</title>

</head>



<body>


<div class="main" style='display:block;' id='page1'>
 <header>
  <div id="header" >
    <img src="images/bg/templogo.png"  id="shaker"/>
  </div>

 </header> 

 <!-- End Header -->
<!--
 <article>

      <div id="article">

      dsddsds

</div>

 </article> 
-->
 <!-- End Article -->



<section>

  <div class="content" style="">
    <div id='takePhoto'></div>
    <div id='uploadPhoto'><div></div> 
    </div>
     <div style="z-index:10000; position:absolute; margin-top:120px;margin-left:490px;width:123px;height:30px; cursor:pointer; " ><input type="file" name='uploadFile' id='uploadFile' multiple onChange="handleFiles(this.files)" style="width:123px;filter:alpha(opacity=0);opacity:.0;-moz-opacity:.0; cursor:pointer;" /></div>
    <div id='showPhoto' style="text-align:center">
       
       <img src="images/demo/girls.png"  style="height:110px;"  class='animationPic pic1' />
       <img src="images/demo/girls-old.png" style="height:110px;" class='animationPic pic2' />
       <img src="images/demo/wife.png" style="height:110px;"  class='animationPic pic3' />
       
       <img src="images/demo/wife-old.png" style="height:110px;" class='animationPic pic4' />
       <img src="images/demo/young.png" style="width:110px;" class='animationPic pic5' />
       <img src="images/demo/young-old.png" style="width:110px;" class='animationPic pic6' />
      
    </div>
    <div id="showImgContainer"><img id="showImg1" /></div>
  </div>
  
</section>

<!--

<footer>

 <div id="footer">
    <div id="legal">Copyright © 2012 时光雕刻者. All rights reserved.</div>
 </div>
 </footer>
-->




<!-- End Footer -->


</div>
<img id="mask0" class="hide" alt="" src="images/faces/face.png" />
<img id="mask1" class="hide" alt="" src="images/faces/facewoman.png" />
<img id="mask2" class="hide" alt="" src="images/faces/face2.png" />
<img id="mask3" class="hide" alt="" src="images/faces/face3.png" />
<img id="mask4" class="hide" alt="" src="images/faces/face4.png" />
<img id="mask5" class="hide" alt="" src="images/faces/face5.png" />

<img id="tmpimg" class="hide" src="about:blank" />
<canvas id="temp" class="hide" width="640" height="640"></canvas>
<script src="js/h.glfx.js"></script>
<script src="js/h.common.js"></script>
<script src="js/h.makeup.js"></script>
<script src="js/h.fx.js"></script>
<script src="js/h.main.js"></script>
<script>
    
</script>
<!--2选择照片-->
<div class="main" style="display:none;" id='page2'>

    <div id="drop-area" class="drop-area noimg">
         <div id="container" class="drop-inner">
         	<div id="step1Source" style="position:relative;float: left;">
                正在进行图像处理，人脸识别，请稍等...
            </div>  
		</div>
    </div>
	<div class='photoBarLine'></div>
	 <div id='hzDealphotoBar' style="display:none">
         <div class='bottomMenu' id="hzDealBtn"><img src="images/bg/2046.png"></div>
    </div>
		
    <div id='photoBar' style="display:none;">
       <div class='bottomMenu'><img fx="normal" src="images/bg/2046.png"></div>
       <div class='bottomMenu'><img fx="inkwell" src="images/bg/gray.png"></div>
       <div class='bottomMenu'><img fx="sierra" src="images/bg/gray.png"></div>
       <div class='bottomMenu'><img fx="xpoll" src="images/bg/gray.png"></div>
       <div class='bottomMenu'><img fx="amaro" src="images/bg/gray.png"></div>
       <div class='bottomMenu'><img fx="rise" src="images/bg/gray.png"></div>
       <div class='bottomMenu'><img fx="hudson" src="images/bg/gray.png"></div>
    </div>
    
    <p class="save-wrap">
    <a href="###" id="save-btn" download="carvetime.png">保存</a>
    </p>

</div>
<!--3.2张图片处理-->
<div class="main" style="display:none;" id='page3' >
  <div class='photo2show'>
       <!--
    	<div id='left'><img src="images/bg/bg1.png" style='height:525px; width:348px;' /></div>
    	<div id='right'>
             <img src="images/bg/bg1.png" style='height:525px; width:348px;' />
        </div>-->
        <img src="images/bg/bg1.png" style='height:525px; width:700px;' />
  </div>
    <div class='photoBarLine'></div>	
    <div id='photoBar'>
       <div class='bottomMenu'><img src="images/bg/fx-btn.png"></div>
       <div class='bottomMenu'><img src="images/bg/fx-btn.png"></div>
       <div class='bottomMenu'><img src="images/bg/fx-btn.png"></div>
       <div class='bottomMenu'><img src="images/bg/fx-btn.png"></div>
       <div class='bottomMenu'><img src="images/bg/fx-btn.png"></div>
    </div>
    
    <!--show old pic-->
    <div style="display:none;z-index:1100; position:absolute; background-color:#603;margin-top:-665px;margin-left:95px;width:720px;height:525px;" id='toshowold'>
    asdfsdf
    </div>
    
</div>

<script>

var g_data = {};
document.body.onclick=function(e){
	if(e.target.tagName!='IMG')showImgContainer.style.display='none';
}
function showImg(){
	var imgs=showPhoto.getElementsByTagName('img');
	for(var i=0;i<imgs.length;++i){
		imgs[i].onclick=function(e){
			var target=e.currentTarget;
			showImg1.src=target.getAttribute('src');
			showImgContainer.style.display='block';
		}
	}
	return false;
}
showImg();
$(function() {
	var ch = document.documentElement.clientHeight; 
	if(ch>700){
		$('.main').css('margin-top',parseInt((ch-700)/2)+'px' );
	}
});
$('#uploadPhoto','#page1').click(function(){ $('#uploadFile','#page1').click();   });
function handleFiles(files){
		//$('#uploadFile').change(function(e){console.log($(this).files );
			//var files = $(e).files;
			$('#container',$('#page2')).find('img').attr('src','');
			for (var i = 0; i < files.length; i++) {
				var file = files[i];
				g_data.fileName = file.fileName;
				var imageType = /image.*/;
				if (!file.type.match(imageType)) {
					continue;
				}
				$('#page1').hide();
				$('#page2').show();
				
				var reader = new FileReader();
				reader.onload = function(e){ 
					/*$('#container',$('#page2')).find('img').attr('src',e.target.result);
					
					ImgObj=new Image();
					ImgObj.src=$('#container',$('#page2')).find('img').attr('src');
					ImgObj.onload=function(e){
						var h = ImgObj.height;
						var w = ImgObj.width; console.log(h);console.log(w);
						if(h>=w && h>525){
							$('#container',$('#page2')).find('img').css('height','525px');
						}
						else if(w>h && w>700){
							$('#container',$('#page2')).find('img').css('width','700px');
						}
					};*/
					var img = new Image();
					img.src= e.target.result;
					img.onload = function(){
						_initHzStep2(img);
					}
				}
				reader.readAsDataURL(file);
			} 
		//});
 	}
</script>
</body>

</html>

